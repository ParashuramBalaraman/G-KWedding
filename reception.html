<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>RSVP</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- normalize css -->
        <link rel = "stylesheet" href = "resources/normalize.css">
        <!-- font -->
        <link rel = "stylesheet" href = "resources/font.css">
        <!-- animate css -->
        <link rel = "stylesheet" href = "resources/animate.css-main/animate.css">
        <!-- custom (main) css -->
        <link rel="stylesheet" href="css/main.css">
        <!-- multiple dropdown -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/css/multi-select-tag.css">
        <style>
            .btn-selected {
                background-color: #8b7156;
                color: #fff;
            }
            .error-message {
                color: red;
                display: none;
            }
        </style>
    </head>
    
    <body>
    
        <!-- Details section -->
        <section class = "testimonial" id = "details" style="background-image: linear-gradient(rgba(132, 163, 168, 0.5), rgba(132, 163, 168, 1)), url(../assets/markovina.jpg);">
            <div class = "container">
            <div class = "title">
                <h3 class = "wow animate__animated animate__bounceIn animate__slow">The reception will be at</h3>
                <h2 class = "wow animate__animated animate__bounceIn animate__slow">Markovina Vineyard Estate</h2>
                <p class = "text">84 Old Railway Road, KumeÅ« 0892</p>
            </div>
        
            <div>
                <div class = "testimonial-item">
                <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12782.927366664784!2d174.5755!3d-36.777!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6d0d15a54cb8aaff%3A0xd3d93a9e9316b477!2sMarkovina%20Vineyard%20Estate!5e0!3m2!1sen!2snz!4v1702273032887!5m2!1sen!2snz" 
                width="70%" height="450rem" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                <p style="font-size: medium; font-style: oblique; font-weight: bold;"> We would love you to join us in celebrating the marriage at our reception on the 8th of June.</p>
                <p style="padding-top:2%; font-size: medium;">The dress code for the reception is Western or Indian formal. 
                    And there will be plenty of parking available at the venue. 
                </p>
                <span style="font-size: large;">Please ensure you arrive at the venue at 4.00pm.</span>
                </div>
            </div>
            </div>
        </section>
        <!-- end of details section -->
        
        <!-- rsvp section -->
        <section class = "contact" id = "rsvp">
            <div class = "container" style="color: var(--black);"> <!-- making the text black for the entire section-->
            <div class = "title" >
                <h2 class = "wow animate__animated animate__bounceIn animate__slow">RSVP</h2>
                <p class = "text">RSVP for the reception</p>
            </div>
            <div class = "row wow animate__animated animate__fadeInUp animate__slow" style="padding-top: 0;">
                <div class = "contact-left">
                <h1 style="font-size:x-large;">RSVP Here</h1>
                <form id = "rsvpReception" method= "post" action="/reception" onsubmit="showNotification(event)">
                <label for = "attendees">Guests' Names</label>
                <select name="attendees" id="guests" multiple>

                    <option value="Mani Uncle">Mani Uncle</option>

                    <option value="Mum">Sam Pearson</option>
                    <option value="Dad">Tony Pearson</option>

                    <option value="Lucy">Lucy Pearson</option>
                    <option value="Scott">Scott Johnson</option>
                    <option value="Gareth">Gareth Pearson</option>
                    <option value="Jess">Jess Pearson</option>
                    <option value="Isaac">Isaac Pearson</option>
                    <option value="Oscar Baby">Oscar Pearson</option>
                    <option value="Lewis">Lewis Pearson</option>
                    <option value="Mel">Melanie Rose</option>

                    <option value="Amma">Sumathy Sathiamoorthy</option>
                    <option value="Patchu">Parashuram Balaraman</option>
                    <option value="Ammamma">Ammamma</option>

                    <option value="Periamma">Gomathy Kokulan</option>
                    <option value="Periappa">Kokulan Narasingham</option>
                    <option value="Ishan">Ishan Kokulan</option>
                    <option value="Disha">Disha Gomathinayagam</option>

                    <option value="Mama">Gobinathan Sathiamoorthy</option>
                    <option value="Mami">Aarthi Gobinathan</option>
                    <option value="Athith">Athith Gobinathan</option>
                    <option value="Aravinth">Aravinth Gobinathan</option>
                    <option value="Aniruth">Aniruth Gobinathan</option>

                    <option value="Kola Periamma">Kola Nithi</option>
                    <option value="Nithi Periappa">Nithi Balasubramaniam</option>

                    <option value="Udhayan Mama">Udhayan Siva</option>
                    <option value="Shamini Mami">Shamini Udhayakumar</option>
                    <option value="Abishek">Abishek Udhayakumar</option>

                    <option value="Mayuran Mama">Mayuran Sathiabalan</option>
                    <option value="Shanthi Mami">Shanthi Mayuran</option>
                    <option value="Sivakami">Sivakami Mayuran</option>
                    <option value="Balaji">Balaji Mayuran</option>

                    <option value="Arundha Aunty">Arundha Anandhabavan</option>
                    <option value="Anandhan Uncle">Anandhan Anandhabavan</option>

                    <option value="Jala Periamma">Jala Easwaran</option>
                    <option value="Easan Periappa">Easan Easwaran</option>
                    <option value="Mathura">Mathura Easwaran</option>

                    <option value="Giri Uncle">Giri Ghiridharan</option>
                    <option value="Sumathy Aunty">Sumathy Ghiridharan</option>
                    <option value="Praveen">Praveen Ghiridharan</option>
                    <option value="Varun">Varun Ghiridharan</option>
                    <option value="Priya">Priya Patel</option>
                    
                    <option value="Victor Uncle">Victor Seberatnam</option>
                    <option value="Chooty Aunty">Chooty Seberatnam</option>
                    <option value="Jesh">Jesh Seberatnam</option>
                    <option value="Gabby">Gabby Seberatnam</option>

                    <option value="Sasi Uncle">Sasi Sasikumar</option>
                    <option value="Kanna Aunty">Kanna Sasikumar</option>
                    <option value="Asha">Asha Sasikumar</option>
                    <option value="Aakash">Aakash Sasikumar</option>
                    <option value="Maheshwari Aunty">Maheshwari Aunty</option>

                    <!-- Check Last names -->
                    <option value="Vijiyan Uncle">Vijiyan Senthuvijiyan</option> 
                    <option value="Shankari Aunty">Shankari Senthuvijiyan</option>
                    <option value="Diviyan">Diviyan Senthuvijiyan</option>

                    <option value="Brian Uncle">Brian Rodricks</option>
                    <option value="Dushi Aunty">Dushi Rodricks</option>
                    <option value="Nishanth">Nishanth Rodricks</option>
                    <option value="Prashanth Anna">Prashanth Rodricks</option>
                    <option value="Akshita Akka">Akshita Prashanth</option>

                    <!--Check Last Names-->
                    <option value="Nithi Uncle">Nithi Nithyanantham</option>
                    <option value="Gowri Aunty">Gowri Nithyananthan</option>

                    <option value="Ragu Uncle">Ragu Ragunathan</option>
                    <option value="Kavitha Aunty">Kavitha Ragunathan</option>
                    <option value="Divesh">Divesh Ragunathan</option>
                    <option value="Dilshan">Dilshan Ragunathan</option>

                    <option value="Umasuthan Uncle">Suthan Umasuthan</option>
                    <option value="Shamini Aunty">Shamini Umasuthan</option>
                    <option value="Rishi">Rishi Umasuthan</option>

                    <option value="Kamshi">Kamshi Umasuthan</option>
                    <option value="AJ (Kamshi)">AJ Sridaran</option>

                    <option value="Thevaki Aunty">Thevaki Edwards</option>
                    <option value="Gaya">Gaya Edwards</option>

                    <option value="Sabrin Aunty">Sabrin Hafeez</option>
                    <option value="Hafeez Uncle">Hafeez Hafeez</option>

                    <option value="Kalaivany Aunty">Kalaivany Ganeshamoorthy</option>

                    <option value="Jey">Jey Jeyaseelan</option>
                    <option value="Kaylah">Kaylah McBirney</option>
                    <option value="Lucy (Friend)">Lucy Qiu</option>
                    <option value="Olivia">Olivia Potter</option>
                    <option value="Connor">Connor Blair</option>
                    <option value="AJ">AJ Hawkins</option>
                    <option value="Cody">Cody</option>
                    <option value="Riki-Lee">Riki-Lee Waititi-Unsworth</option>
                    <option value="Miffy">Miffy Barling</option>
                    <option value="Oscar">Oscar Ketchlove</option>
                    <option value="Bilal">Bilal Nasier</option>
                    <option value="Kasey">Kasey Nihill</option>
                    <option value="Liam">Liam Polglase</option>
                    <option value="Annaliese">Annaliese Wheat</option>
                    <option value="Jade">Jade Anderson</option>
                    <option value="Germaine">Germaine Pike-Tavai</option>
                    <option value="Linda">Linda Duong</option>
                    <option value="Holly">Holly Milton</option>
                    <option value="Brooke">Brooke Armstrong</option>
                    <option value="Zoe">Zoe Henry</option>
                    <option value="Vera">Vera Lee</option>
                    <option value="Maddie Little"> Maddie Little</option> 
                    <option value="Tanniti">Tanniti Wangsapan</option>     
                    <option value="Kaajal">Kaajal Israni</option>        

                    <option value="Ben A">Ben Allison</option>
                    <option value="Emily">Emily Coe</option>
                    <option value="Ben W">Ben Wakelin</option>
                    <option value="Eran">Eran Waldeck</option>
                    <option value="Harrison">Harrison Hawthorne</option>
                    <option value="Hamish">Hamish Armour</option>
                    <option value="Rochelle">Rochelle Dafel</option>
                    <option value="Joe">Joe Speirs</option>
                    <option value="Nat">Nat Wellstead</option>
                    <option value="Alice">Alice Wellstead</option>
                    <option value="Eli">Eli Wellstead</option>
                    <option value="Maddie">Maddie Hearn</option>
                    <option value="Pete">Pete Cable</option>
                    <option value="Nikki">Nikki Sinclair</option>
                    <option value="Mike">Mike Armour</option>
                    <option value="Ben B">Ben Booth</option>
                    <option value="Alex">Alex Harman-Crooks</option>
                </select>
                <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/js/multi-select-tag.js"></script>
                <script>
                    new MultiSelectTag('guests')
                </script>
                <label for = "attending">Are you attending the reception? (If not everyone is attending, only select those who are.)</label>
                <div>
                    <button type="button" class="btn-white btn-rounded" id="btnYes" onclick="setAttending(true)">Yes</button>
                    <button type="button" class="btn-white btn-rounded" id="btnNo" onclick="setAttending(false)">No</button>
                </div>
                <input type="hidden" id="attending" name="attending">
                <div id="attendingFields" class="hidden">
                    <input type = "text" class = "form-control" name = "requirements" placeholder="Dietary requirements">
                    <input type = "text" class = "form-control" name = "phone" placeholder="Phone number">
                </div>
                <div class="error-message" id="error-message">Please select whether you are attending or not.</div>
                <button type="submit" class="submit-btn">Send Now</button>
                </form>


                </div>
                <div class = "contact-right">
                <h1 style="font-size:x-large;">Alternatively you can RSVP by:</h1>
                <div >
                    <h2>Sending an Email</h2>
                    <p class = "text">gavinkaviya@gmail.com</p>
                </div>
                </div>
            </div>
            </div>
        </section>
        <!-- end of rsvp section --> 

        <div id="customConfirm" class="modal">
            <div class="modal-content">
                <div id="confirmMessage" style="font-family: 'Hind Siliguri', sans-serif; font-weight: bold;"></div>
                <div class="modal-footer">
                    <button id="confirmYes" class="confirm-leave">Return to main page</button>
                    <button id="confirmNo" class="confirm-stay">Stay on reception page</button>
                </div>
            </div>
        </div>

        <script>
            function setAttending(isAttending) {
                const attendingInput = document.getElementById('attending');
                const attendingFields = document.getElementById('attendingFields');
                const phoneInput = document.querySelector('input[name="phone"]');
                const btnYes = document.getElementById('btnYes');
                const btnNo = document.getElementById('btnNo');

                attendingInput.value = isAttending ? 'yes' : 'no';
                attendingFields.classList.toggle('hidden', !isAttending);

                // Toggle selected class
                if (isAttending) {
                  phoneInput.setAttribute('required', 'required');
                  btnYes.classList.add('btn-selected');
                  btnNo.classList.remove('btn-selected');
                } else {
                  phoneInput.removeAttribute('required');
                  btnYes.classList.remove('btn-selected');
                  btnNo.classList.add('btn-selected');
                }
            }
            function showNotification(event) {
                event.preventDefault();
                const form = document.getElementById('rsvpReception');
                const modal = document.getElementById('customConfirm');
                const confirmLeave = document.getElementsByClassName('confirm-leave')[0];
                const confirmStay = document.getElementsByClassName('confirm-stay')[0];
                const confirmMessage = document.getElementById('confirmMessage');
                const attending = document.getElementById('attending').value;
                const errorMessage = document.getElementById('error-message');

                if (attending === '') {
                    errorMessage.style.display = 'block';
                    return;
                } else {
                    errorMessage.style.display = 'none';
                }

                if (attending === 'yes') {
                    confirmMessage.innerHTML = '<p>Thank you for RSVPing to the reception!</p><h5>We look forward to seeing you on the 8th of June 2025.</h5>';
                } else {
                    confirmMessage.innerHTML = '<p>Thank you for letting us know!</p><h5>We are sorry you cannot make it, but we appreciate your response.</h5>';
                }
                modal.style.display = 'block';
        
                confirmLeave.onclick = function() {
                    modal.style.display = 'none';
                    submitFormAndRedirect(form, "/");
                }

                confirmStay.onclick = function() {
                    modal.style.display = 'none';
                    submitFormAndRedirect(form, "/reception");
                }
        
            }

            function submitFormAndRedirect(form, url) {
                const formData = new FormData(form);
                let formDataString = '';
                formData.forEach((value, key) => {
                    formDataString += `${key}: ${value}\n`;
                });
                fetch(form.action, {
                    method: 'POST',
                    body: new URLSearchParams(formData),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        window.location.href = url;
                    } else {
                        console.error("Form submission failed:", response.statusText);
                    }
                })
                .catch(error => {
                    console.error("Form submission error:", error);
                });
            }
          </script>
    </body>
</html>